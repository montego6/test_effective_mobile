## Тестовое задание для компании Effective Mobile

## Задание
Создать консольное приложение, с помощью которого можно вести телефонную книгу: добавлять новые записи в справочник, выводить все записи на экран, искать по записям, редактировать и удалять записи. Телефонная книга должна быть в текстовом формате.

## Решение
Для создания консольного приложения использована библиотека Typer, для вывода использована вспомогательная библиотека Rich. С помощью Typer созданы комманды для консольного приложения с различными аргументами и опциями. С помощью dataclass-а создана модель записи справочника, созданы методы модели для валидации данных с помощью регулярных выражений, преобразования модели в строку для последующей записи в текстовый файл, создания модели из записей в текстовом файле.

## Доступные комманды
### newbook 
Аргумент: FILENAME

Создает новую телефонную книгу с указанным именем *FILENAME*. Имя может быть как 'phonebook.txt', так и просто 'phonebook' 

Опции:

**--set-default** Устанавливает созданную телефонную книгу в качестве текущей активной книги. 

### rmbook 
Аргумент: FILENAME

Удаляет телефонную книгу с указанным именем *FILENAME*. Имя может быть как 'phonebook.txt', так и просто 'phonebook'.

### switch 
Аргумент: FILENAME

Устанавливает книгу с указанным именем *FILENAME* в качестве текущей активной книги. мя может быть как 'phonebook.txt', так и просто 'phonebook'.

### show

Показывает все записи текущей активной книги в виде таблицы.

### add

Добавляет запись к текущей активной книге. Все данные полей вводятся в интерактивном режиме, при этом каждое поле проверяется регулярным выражением, и если проверка не проходится, то будет предложено ввести поле заново.

### edit

Изменяет записи, данные которых подходят под значение фильтра.

Опции:

**-field** Название поля записи, которое нужно будет изменить. По умолчанию - имя. 

**--filter -f** Фильтры. Должны быть указаны в формате название_поля=значение_поля. Допускается указание множества фильтров

**-eq** Опция по умолчанию. Если установлена, то фильтр будет проверять полное совпадение значения записи и значения фильтра 

**-contains** Если установлена, то фильтр будет проверять включения значения фильтра в значение записи. Обе вышестоящие опции case sensitive

**-and** Опция по умолчанию. Определяет, что множественные фильтры будут применять с использованием логического AND, т.е. все фильтры должны быть верны для записи.

**-or** Если установлена, то множественные фильтры будут применяться с использованием логического OR, т.е. достаточно одного верного фильтра для записи.

### search

Ищет записи, подходящие под условия фильтрации.


Опции:

**--filter -f** Фильтры. Должны быть указаны в формате название_поля=значение_поля. Допускается указание множества фильтров

**-eq** Опция по умолчанию. Если установлена, то фильтр будет проверять полное совпадение значения записи и значения фильтра 

**-contains** Если установлена, то фильтр будет проверять включения значения фильтра в значение записи. Обе вышестоящие опции case sensitive

**-and** Опция по умолчанию. Определяет, что множественные фильтры будут применять с использованием логического AND, т.е. все фильтры должны быть верны для записи.

**-or** Если установлена, то множественные фильтры будут применяться с использованием логического OR, т.е. достаточно одного верного фильтра для записи.


### delete

Удаляет записи, подходящие под условия фильтрации

Опции:

**--filter -f** Фильтры. Должны быть указаны в формате название_поля=значение_поля. Допускается указание множества фильтров

**-eq** Опция по умолчанию. Если установлена, то фильтр будет проверять полное совпадение значения записи и значения фильтра 

**-contains** Если установлена, то фильтр будет проверять включения значения фильтра в значение записи. Обе вышестоящие опции case sensitive

**-and** Опция по умолчанию. Определяет, что множественные фильтры будут применять с использованием логического AND, т.е. все фильтры должны быть верны для записи.

**-or** Если установлена, то множественные фильтры будут применяться с использованием логического OR, т.е. достаточно одного верного фильтра для записи.

**_Для каждой комманды доступна опция --help с подробной документацией_**

## Пример комманд
```
python3 phonebook.py switch newbook
```
Переключается на телефонную книгу с названием newbook
```
python3 phonebook.py edit -f id=1 -f name=slava -or --field employee
```
Меняет поле employee для записей, в которых id равно 1 или поле name равно slava 
```
python3 phonebook.py search -f name=ser -f second_name=vich -and -contains 
```
Показывает записи, поле name которых включает ser, а поле second_name которых включает vich

## Запус приложения
Сначала в корне проекта создадим виртуальное окружение и активируем его:
```
python3 -m venv venv
source venv/bin/activate
```
Затем установим все зависимости проекта, отдав следующую команду:
```
pip install -r requirements.txt
```
Затем задаем переменную окружения MANPAGER, для вывода записей постранично утилитой more
```
export MANPAGER=more
```
Готово! Можем отдавать комманды
```
python3 phonebook.py --help
```
